<textarea id="translateContent1" rows="5" cols="50"></textarea>
<textarea id="translateContent2" rows="5" cols="50"></textarea>
<textarea id="translateContent3" rows="5" cols="50"></textarea>
<textarea id="translateContent4" rows="5" cols="50"></textarea>
<textarea id="translateContent5" rows="5" cols="50"></textarea>

<select id="tta_tgtsl" style="width: 113px;" aria-label="输出语言选择下拉菜单">
  <option value="ar">阿拉伯语</option>
  <option value="ga">爱尔兰语</option>
  <option value="et">爱沙尼亚语</option>
  <option value="bg">保加利亚语</option>
  <option value="is">冰岛语</option>
  <option value="pl">波兰语</option>
  <option value="bs-Latn">波斯尼亚语(拉丁语)</option>
  <option value="fa">波斯语</option>
  <option value="da">丹麦语</option>
  <option value="de">德语</option>
  <option value="ru">俄语</option>
  <option value="fr">法语</option>
  <option value="zh-Hant">繁体中文</option>
  <option value="fil">菲律宾语</option>
  <option value="fj">斐济语</option>
  <option value="fi">芬兰语</option>
  <option value="ht">海地克里奥尔语</option>
  <option value="ko">韩语</option>
  <option value="nl">荷兰语</option>
  <option value="ca">加泰罗尼亚语</option>
  <option value="zh-Hans">简体中文</option>
  <option value="cs">捷克语</option>
  <option value="kn">卡纳达语</option>
  <option value="otq">克雷塔罗奥托米语</option>
  <option value="tlh">克林贡语</option>
  <option value="hr">克罗地亚语</option>
  <option value="lv">拉脱维亚语</option>
  <option value="lt">立陶宛语</option>
  <option value="ro">罗马尼亚语</option>
  <option value="mg">马达加斯加语</option>
  <option value="mt">马耳他语</option>
  <option value="ml" selected="selected">马拉雅拉姆语</option>
  <option value="ms">马来语(拉丁语)</option>
  <option value="mi">毛利语</option>
  <option value="bn-BD">孟加拉语</option>
  <option value="mww">苗语</option>
  <option value="af">南非荷兰语</option>
  <option value="pa">旁遮普语(果鲁穆齐语)</option>
  <option value="pt-br">葡萄牙语(巴西)</option>
  <option value="pt-pt">葡萄牙语(葡萄牙)</option>
  <option value="ja">日语</option>
  <option value="sv">瑞典语</option>
  <option value="sm">萨摩亚语</option>
  <option value="sr-Latn">塞尔维亚语(拉丁语)</option>
  <option value="sr-Cyrl">塞尔维亚语(西里尔文)</option>
  <option value="nb">书面挪威语</option>
  <option value="sk">斯洛伐克语</option>
  <option value="sl">斯洛文尼亚语</option>
  <option value="sw">斯瓦希里语</option>
  <option value="ty">塔希提语</option>
  <option value="te">泰卢固语</option>
  <option value="ta">泰米尔语</option>
  <option value="th">泰语</option>
  <option value="to">汤加语</option>
  <option value="tr">土耳其语</option>
  <option value="cy">威尔士语</option>
  <option value="ur">乌尔都语</option>
  <option value="uk">乌克兰语</option>
  <option value="es">西班牙语</option>
  <option value="he">希伯来语</option>
  <option value="el">希腊语</option>
  <option value="hu">匈牙利语</option>
  <option value="it">意大利语</option>
  <option value="hi">印地语</option>
  <option value="id">印度尼西亚语</option>
  <option value="en">英语</option>
  <option value="yua">尤卡坦玛雅语</option>
  <option value="vi">越南语</option>
  <option value="yue">粤语(繁体)</option>
</select>
<input name="Query" type="button" value="翻译" onclick="trans_late();">

<% if @results.present? %>
  <h3>翻译的结果为：</h3>
  <% @results.each do |result| %>
    <p id="notice"><%=result %></p>
  <% end %>
<% end %>

<%= link_to 'New Translation', new_translation_path %>

<script type="text/javascript">
    function b(a, b) {
        // a = -196980178
        // b = "+-3^+b+-f"

        for (var d = 0; d < b.length - 2; d += 3) {
            var c = b.charAt(d + 2)
            console.log("function b a value --- 1-", c)
            c = "a" <= c ? c.charCodeAt(0) - 87 : Number(c)
            console.log("function b c value --- 2-", c)
            c = "+" == b.charAt(d + 1) ? a >>> c : a << c
            console.log("function b a value --- 3-", a)
            console.log("function b b value", b)
            console.log("function b b.charAt(d + 1)", b.charAt(d + 1))
            console.log("function b d value", d)
            console.log("function b '+' == b.charAt(d + 1)", "+" == b.charAt(d + 1))
            console.log("function b c value --- 3-", c)
            a = "+" == b.charAt(d) ? a + c & 4294967295 : a ^ c
            console.log("function b a value --- 4-", a)
        }
        console.log("function b a value", a)
        return a
    }

    function tk(TKK) {
        let a = "";
        let tks = [];
        let translateContents = [];
        let tta = document.getElementsByTagName('textarea')
        for(var i=0; i < tta.length; i++) {
          if(tta[i].value) {
            translateContents.push(tta[i].value);
            a = tta[i].value;
            for (var e = TKK.split("."), h = Number(e[0]) || 0, g = [], d = 0, f = 0; f < a.length; f++) {
                var c = a.charCodeAt(f);
                128 > c ?
                    g[d++] = c : (2048 > c ?
                    g[d++] = c >> 6 | 192 : (55296 == (c & 64512) && f + 1 < a.length && 56320 == (a.charCodeAt(f + 1) & 64512) ?
                        (c = 65536 + ((c & 1023) << 10) + (a.charCodeAt(++f) & 1023), g[d++] = c >> 18 | 240, g[d++] = c >> 12 & 63 | 128) : g[d++] = c >> 12 | 224, g[d++] = c >> 6 & 63 | 128), g[d++] = c & 63 | 128)
            }
            console.log('hhhh', h)
            console.log('gggg', g)
            console.log('gggg.length', g.length)
            console.log('dddd', d)
            a = h;
            for (d = 0; d < g.length; d++) a += g[d],a = b(a, "+-a^+6");
            console.log('aaaa', a)
            a = b(a, "+-3^+b+-f");
            console.log('b(a, "+-3^+b+-f")', b(a, "+-3^+b+-f"))
            a ^= Number(e[1]) || 0;
            console.log('aa', a)
            0 > a && (a = (a & 2147483647) + 2147483648);
            console.log('aaa', a)
            a %= 1E6;

            console.log('function tk a value', a)
            console.log('function tk h value', h)
            tks.push(a.toString() + "." + (a ^ h));
          }
        }
        console.log('tks', tks.join('|'));
        console.log('translateContents', translateContents.join('|'));

       window.location.href = "/translations/get_translate?q=" + translateContents.join('|') + "&tl=" + $("#tta_tgtsl").val();
        // return a.toString() + "." + (a ^ h)
    }
    function trans_late(){
      let translateContents = [];
      let tta = document.getElementsByTagName('textarea')
      for(var i=0; i < tta.length; i++) {
        if (tta[i].value) {
            translateContents.push(tta[i].value);
        }
      }
      window.location.href = "/translations/get_translate?q=" + translateContents.join('||') + "&tl=" + $("#tta_tgtsl").val();
    }
</script>